<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#06060e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="CleanTube">
  <meta name="description" content="広告とショート動画のないYouTube視聴体験">
  <title>CleanTube</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="icon" href="icons/icon-192.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

  <!-- ========== セットアップ画面 ========== -->
  <div id="setup-screen" class="screen">
    <div class="setup-container">
      <div class="setup-logo">
        <div class="logo-big">&#9654;</div>
        <h1>CleanTube</h1>
        <p>広告なし・ショートなしのYouTubeビューアー</p>
      </div>

      <div class="setup-steps">
        <h3>APIキーの取得手順</h3>
        <ol>
          <li><a href="https://console.cloud.google.com/" target="_blank" rel="noopener">Google Cloud Console</a> にアクセス</li>
          <li>プロジェクトを新規作成</li>
          <li>「APIとサービス」→「ライブラリ」→「YouTube Data API v3」を有効化</li>
          <li>「認証情報」→「認証情報を作成」→「APIキー」</li>
          <li>生成されたキーをコピーして下に貼り付け</li>
        </ol>
        <p class="step-note">※ 無料枠: 1日10,000ユニット（個人利用には十分です）</p>
      </div>

      <div class="setup-input-group">
        <label for="google-client-id-input">Google OAuth クライアントID</label>
        <input type="text" id="google-client-id-input" placeholder="xxxxx.apps.googleusercontent.com">
      </div>
      <div id="google-login-section" class="google-login-section">
        <div id="google-login-btn-container"></div>
        <div id="google-login-status" class="google-login-status"></div>
      </div>

      <div class="setup-input-group">
        <label for="api-key-input">YouTube Data API v3 キー</label>
        <input type="text" id="api-key-input" placeholder="AIza...">
      </div>
      <div id="api-key-status" class="status-text"></div>
      <button id="save-api-key" class="btn-primary">設定を保存して開始</button>
    </div>
  </div>

  <!-- ========== ホーム画面 ========== -->
  <div id="home-screen" class="screen">
    <div class="header">
      <div class="header-logo" onclick="App.showHome()">
        <div class="logo-icon">&#9654;</div>
        <span>CleanTube</span>
      </div>
      <div class="header-right">
        <img id="header-avatar" class="header-avatar" src="" alt="" style="display:none">
        <button class="header-btn" id="settings-btn" aria-label="設定">&#9881;</button>
      </div>
    </div>
    <div class="search-bar">
      <input type="search" id="search-input" placeholder="動画を検索..." enterkeyhint="search">
      <button id="search-btn" aria-label="検索">&#128269;</button>
    </div>
    <h2 class="section-title">&#128293; トレンド</h2>
    <div class="video-grid" id="trending-grid"></div>
  </div>

  <!-- ========== 検索結果画面 ========== -->
  <div id="search-screen" class="screen">
    <div class="header">
      <button class="back-btn" aria-label="戻る">&#8592; 戻る</button>
      <span>CleanTube</span>
      <div style="width:44px"></div>
    </div>
    <h2 class="section-title" id="search-result-title"></h2>
    <div class="video-grid" id="search-grid"></div>
    <button class="load-more-btn" id="search-load-more">もっと見る</button>
  </div>

  <!-- ========== 動画再生画面 ========== -->
  <div id="video-screen" class="screen">
    <div class="header">
      <button class="back-btn" aria-label="戻る">&#8592; 戻る</button>
      <span>CleanTube</span>
      <div style="width:44px"></div>
    </div>
    <div id="player-area"></div>
    <div id="video-info"></div>
    <div id="related-videos"></div>
  </div>

  <!-- ========== チャンネル画面 ========== -->
  <div id="channel-screen" class="screen">
    <div class="header">
      <button class="back-btn" aria-label="戻る">&#8592; 戻る</button>
      <span>CleanTube</span>
      <div style="width:44px"></div>
    </div>
    <div id="channel-header"></div>
    <h2 class="section-title">動画一覧</h2>
    <div class="video-grid" id="channel-grid"></div>
    <button class="load-more-btn" id="channel-load-more">もっと見る</button>
  </div>

  <!-- ========== 設定画面 ========== -->
  <div id="settings-screen" class="screen">
    <div class="header">
      <button class="back-btn" aria-label="戻る">&#8592; 戻る</button>
      <span>設定</span>
      <div style="width:44px"></div>
    </div>
    <div class="settings-container">
      <div class="settings-group" id="settings-account-section">
        <h3>アカウント</h3>
        <div id="settings-profile-area"></div>
      </div>

      <div class="settings-group">
        <h3>APIキー</h3>
        <input type="text" id="settings-api-key" class="settings-input" readonly>
      </div>

      <div class="settings-group">
        <h3>地域設定</h3>
        <div class="settings-row">
          <label for="settings-region">地域</label>
          <select id="settings-region">
            <option value="JP">日本</option>
            <option value="US">アメリカ</option>
            <option value="KR">韓国</option>
            <option value="TW">台湾</option>
            <option value="GB">イギリス</option>
            <option value="DE">ドイツ</option>
            <option value="FR">フランス</option>
          </select>
        </div>
      </div>

      <div class="settings-group">
        <h3>フィルター</h3>
        <div class="settings-row">
          <label>Shorts動画を除外</label>
          <div class="toggle-switch">
            <input type="checkbox" id="settings-shorts-filter" checked>
            <span class="toggle-slider"></span>
          </div>
        </div>
      </div>

      <div class="settings-group">
        <h3>APIクォータ使用量（本日）</h3>
        <div class="quota-display" id="quota-usage">0 / 10,000 units</div>
      </div>

      <button id="settings-save" class="btn-primary">設定を保存</button>
      <button id="settings-clear-cache" class="btn-secondary">キャッシュをクリア</button>
      <button id="settings-delete-key" class="btn-danger">APIキーを削除</button>
    </div>
  </div>

  <!-- ========== ローディング ========== -->
  <div id="loading" class="loading-overlay">
    <div class="loading-spinner"></div>
  </div>

  <!-- ========== エラートースト ========== -->
  <div id="error-toast" class="error-toast"></div>

  <!-- ========== JavaScript ========== -->
  <script src="js/storage.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/api.js"></script>
  <script src="js/player.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>

</body>
</html>
